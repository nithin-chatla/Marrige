<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sravan & Niharika | A Royal Telangana Wedding</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&family=Poppins:wght@300;400;500&display=swap" rel="stylesheet">
    
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Tailwind Config for Custom Colors & Fonts -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        maroon: { 800: '#5c0011', 900: '#3d000b' },
                        gold: { 400: '#d4af37', 500: '#b5952f' },
                        saffron: '#ff9933',
                        cream: '#fdfbf7',
                    },
                    fontFamily: {
                        script: ['"Great Vibes"', 'cursive'],
                        serif: ['"Playfair Display"', 'serif'],
                        sans: ['"Poppins"', 'sans-serif'],
                    },
                    backgroundImage: {
                        'mandala': "url('https://www.transparenttextures.com/patterns/floral-flourishes.png')",
                    }
                }
            }
        }
    </script>

    <style>
        /* Custom CSS & Animations */
        body {
            background-color: #fdfbf7;
            overflow-x: hidden;
        }

        /* Scroll Reveal Classes */
        .reveal {
            opacity: 0;
            transform: translateY(60px);
            transition: all 1s cubic-bezier(0.5, 0, 0, 1);
        }
        .reveal.active {
            opacity: 1;
            transform: translateY(0);
        }
        .reveal-left {
            opacity: 0;
            transform: translateX(-60px);
            transition: all 1s cubic-bezier(0.5, 0, 0, 1);
        }
        .reveal-left.active {
            opacity: 1;
            transform: translateX(0);
        }
        .reveal-right {
            opacity: 0;
            transform: translateX(60px);
            transition: all 1s cubic-bezier(0.5, 0, 0, 1);
        }
        .reveal-right.active {
            opacity: 1;
            transform: translateX(0);
        }

        .reveal-zoom {
            opacity: 0;
            transform: scale(0.8);
            transition: all 1s cubic-bezier(0.5, 0, 0, 1);
        }
        .reveal-zoom.active {
            opacity: 1;
            transform: scale(1);
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }
        .floating-text {
            display: inline-block;
            animation: float 4s ease-in-out infinite;
        }

        /* Hero Background Gradient & Animation */
        .hero-bg {
            background: linear-gradient(135deg, rgba(92, 0, 17, 0.9) 0%, rgba(61, 0, 11, 0.95) 100%), url('https://images.unsplash.com/photo-1583939003579-730e3918a45a?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }
        
        /* New: Cinematic Background Pan */
        .hero-bg-animated {
            background-size: 150% 150%;
            animation: bg-pan 30s ease-in-out infinite alternate;
        }
        @keyframes bg-pan {
            0% { background-position: 0% 50%; }
            100% { background-position: 100% 50%; }
        }

        .gold-text-glow {
            text-shadow: 0 0 20px rgba(212, 175, 55, 0.6);
        }

        /* New: Twinkling Sparkles */
        .sparkle {
            position: absolute;
            background: #fff;
            border-radius: 50%;
            box-shadow: 0 0 10px #d4af37, 0 0 20px #d4af37;
            animation: twinkle infinite ease-in-out;
            pointer-events: none;
        }
        @keyframes twinkle {
            0%, 100% { opacity: 0; transform: scale(0.5); }
            50% { opacity: 1; transform: scale(1.5); }
        }

        /* New: Countdown Glow */
        .countdown-glow {
            animation: breathe-glow 2s ease-in-out infinite alternate;
        }
        @keyframes breathe-glow {
            0% { box-shadow: 0 0 10px rgba(212,175,55,0.2); text-shadow: 0 0 5px rgba(212,175,55,0.2); }
            100% { box-shadow: 0 0 30px rgba(212,175,55,0.8); text-shadow: 0 0 20px rgba(212,175,55,0.8); border-color: #f3e5ab; }
        }

        /* Floating Petals Animation (Marigold & Rose) */
        .petal {
            position: fixed;
            top: -10vh;
            z-index: 50;
            pointer-events: none;
            animation: fall linear forwards;
        }
        .petal.rose {
            width: 15px; height: 15px;
            background: #e63946;
            border-radius: 150px 0 150px 0;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.2);
        }
        .petal.marigold {
            width: 12px; height: 12px;
            background: #ff9933;
            border-radius: 50%;
            filter: drop-shadow(0 0 2px #d4af37);
        }

        @keyframes fall {
            0% { transform: translateY(0) rotate(0deg) translateX(0); opacity: 1; }
            50% { transform: translateY(50vh) rotate(180deg) translateX(20px); }
            100% { transform: translateY(110vh) rotate(360deg) translateX(-20px); opacity: 0; }
        }

        /* Buttons & Interactions */
        .btn-gold {
            background: linear-gradient(45deg, #d4af37, #f3e5ab, #d4af37);
            background-size: 200% auto;
            color: #3d000b;
            transition: 0.5s;
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.4);
            animation: pulse-gold 2s infinite;
        }
        .btn-gold:hover {
            background-position: right center;
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(212, 175, 55, 0.6);
        }

        @keyframes pulse-gold {
            0% { box-shadow: 0 0 0 0 rgba(212, 175, 55, 0.7); }
            70% { box-shadow: 0 0 0 15px rgba(212, 175, 55, 0); }
            100% { box-shadow: 0 0 0 0 rgba(212, 175, 55, 0); }
        }

        /* Timeline Styles */
        .timeline-dot {
            position: absolute;
            width: 20px;
            height: 20px;
            background: #d4af37;
            border: 4px solid #fdfbf7;
            border-radius: 50%;
            left: 50%;
            transform: translateX(-50%);
            box-shadow: 0 0 10px rgba(212,175,55,0.5);
        }

        /* Glassmorphism Cards */
        .glass-card {
            background: rgba(253, 251, 247, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(212, 175, 55, 0.3);
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
        }

        /* Image Hover Zoom */
        .img-zoom-container {
            overflow: hidden;
        }
        .img-zoom {
            transition: transform 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        .img-zoom-container:hover .img-zoom {
            transform: scale(1.1);
        }

        /* Animated Divider */
        .floral-divider {
            width: 100%;
            height: 30px;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 30" preserveAspectRatio="none"><path d="M50,15 Q60,0 70,15 T90,15 M50,15 Q40,30 30,15 T10,15" fill="none" stroke="%23d4af37" stroke-width="1.5"/></svg>');
            background-repeat: repeat-x;
            background-size: 100px 30px;
            opacity: 0.7;
        }

        /* Form Input focus */
        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: #d4af37;
            box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.3);
        }
        
        /* New: Form Input Scaling */
        .input-animated {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .input-animated:focus {
            transform: scale(1.02);
            background-color: rgba(253, 251, 247, 0.25);
        }
        
        /* Loading Overlay */
        #loader {
            position: fixed;
            inset: 0;
            background: #5c0011;
            z-index: 9999;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: opacity 1s ease;
        }
        .loader-ring {
            width: 80px;
            height: 80px;
            border: 4px solid rgba(212, 175, 55, 0.3);
            border-top: 4px solid #d4af37;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body class="font-sans text-gray-800 antialiased relative">

    <!-- Preloader -->
    <div id="loader">
        <div class="text-center">
            <div class="loader-ring mx-auto mb-4"></div>
            <h2 class="font-script text-4xl text-gold-400">S & N</h2>
        </div>
    </div>

    <!-- Petals Container -->
    <div id="petals-container"></div>

    <!-- Floating Audio Toggle (Moved to Top Right) -->
    <button id="music-btn" class="fixed top-24 right-4 md:right-8 z-40 bg-maroon-800 text-gold-400 w-12 h-12 rounded-full shadow-lg flex items-center justify-center hover:bg-maroon-900 transition-colors border border-gold-400" onclick="toggleMusic()">
        <i class="fas fa-volume-mute" id="music-icon"></i>
    </button>

    <!-- Navigation -->
    <nav class="fixed w-full z-30 transition-all duration-500" id="navbar">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-20">
                <div class="flex-shrink-0 font-script text-3xl text-gold-400 font-bold tracking-wider cursor-pointer" onclick="window.scrollTo(0,0)">
                    S <span class="text-white">&</span> N
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-8 font-serif text-sm uppercase tracking-widest text-white">
                        <a href="#events" class="hover:text-gold-400 transition-colors">Events</a>
                        <a href="#gallery" class="hover:text-gold-400 transition-colors">Gallery</a>
                        <a href="#venue" class="hover:text-gold-400 transition-colors">Venue</a>
                        <a href="#rsvp" class="bg-gold-400 text-maroon-900 px-5 py-2 rounded-full font-bold hover:bg-white transition-colors">RSVP</a>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="relative h-screen flex items-center justify-center hero-bg hero-bg-animated text-center overflow-hidden">
        <div class="absolute inset-0 bg-black/40"></div>
        
        <!-- New: Sparkles Container -->
        <div id="sparkles-container" class="absolute inset-0 z-0"></div>
        
        <!-- Toranam Overlay -->
        <div class="absolute top-0 w-full h-16 bg-[url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 20\" preserveAspectRatio=\"none\"><path d=\"M0,0 L10,20 L20,0 L30,20 L40,0 L50,20 L60,0 L70,20 L80,0 L90,20 L100,0 Z\" fill=\"%23228B22\" opacity=\"0.8\"/></svg>')] bg-repeat-x bg-[length:50px_20px]"></div>

        <div class="relative z-10 px-4 reveal active">
            <h3 class="font-serif text-gold-400 uppercase tracking-[0.3em] text-sm md:text-lg mb-4">Together with their families</h3>
            <h1 class="font-script text-6xl md:text-8xl lg:text-9xl text-white mb-6 gold-text-glow drop-shadow-lg floating-text">
                Sravan <span class="text-gold-400 text-5xl md:text-7xl">&</span> Niharika
            </h1>
            <p class="font-serif text-xl md:text-2xl text-cream mb-8 tracking-wide">Invite you to celebrate their wedding</p>
            
            <div class="floral-divider mb-8"></div>

            <p class="font-sans text-lg md:text-xl text-white font-light mb-10">
                <i class="far fa-calendar-alt text-gold-400 mr-2"></i> March 5, 2026<br>
                <span class="text-sm mt-2 block"><i class="fas fa-map-marker-alt text-gold-400 mr-2"></i> <span id="hero-location-text">Kodandapuram, Nalgonda</span></span>
            </p>
            
            <a href="#events" class="btn-gold px-10 py-4 rounded-full font-serif font-bold uppercase tracking-wider text-sm inline-block">
                Join The Celebration
            </a>
        </div>
    </section>

    <!-- Countdown Section -->
    <section class="py-16 bg-cream bg-mandala border-b border-gold-400/20">
        <div class="max-w-4xl mx-auto px-4">
            <div class="glass-card rounded-2xl p-8 md:p-12 text-center reveal-zoom transform -translate-y-24 relative z-20">
                <h2 class="font-serif text-3xl text-maroon-800 mb-8 flex items-center justify-center gap-4">
                    <i class="fas fa-om text-saffron text-2xl"></i> 
                    Awaiting The Muhurtham
                    <i class="fas fa-om text-saffron text-2xl"></i>
                </h2>
                <div class="flex justify-center gap-4 md:gap-8" id="countdown">
                    <!-- Countdown populated by JS -->
                </div>
            </div>
        </div>
    </section>

    <!-- Wedding Events -->
    <section id="events" class="py-24 bg-maroon-900 bg-mandala text-cream relative">
        <div class="absolute inset-0 bg-black/30"></div>
        <div class="max-w-5xl mx-auto px-4 relative z-10">
            <div class="text-center mb-16 reveal">
                <h2 class="font-script text-5xl text-gold-400 mb-2">Wedding Celebrations</h2>
                <div class="h-1 w-24 bg-cream mx-auto rounded mb-4"></div>
                <p class="font-serif text-lg">Join us in the vibrant traditions of our Telugu wedding</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl mx-auto">
                <!-- Event 1: Prathanam -->
                <div class="glass-card bg-maroon-800/40 p-8 rounded-xl border border-gold-400/50 text-center transform hover:-translate-y-4 hover:scale-105 hover:shadow-[0_0_30px_rgba(212,175,55,0.3)] transition-all duration-500 reveal-zoom group">
                    <div class="w-16 h-16 mx-auto bg-gold-400 rounded-full flex items-center justify-center mb-6 group-hover:scale-110 transition-transform group-hover:animate-bounce">
                        <i class="fas fa-om text-maroon-900 text-2xl"></i>
                    </div>
                    <h3 class="font-serif text-2xl text-gold-400 mb-2">Prathanam</h3>
                    <p class="font-sans text-sm text-gray-300 mb-4">Wed, Mar 4, 2026 | 4:00 PM</p>
                    <p class="font-sans text-sm mb-4">Pre-wedding rituals followed by Dinner to bless the couple.</p>
                    <span class="text-xs uppercase tracking-widest text-gold-400/80 border-t border-gold-400/30 pt-4 block">Bride's Residence, Madhapuram</span>
                </div>

                <!-- Event 2: Sumuhurtham -->
                <div class="glass-card bg-maroon-800/40 p-8 rounded-xl border border-gold-400/50 text-center transform hover:-translate-y-4 hover:scale-105 hover:shadow-[0_0_30px_rgba(212,175,55,0.3)] transition-all duration-500 reveal-zoom group" style="transition-delay: 100ms;">
                    <div class="w-16 h-16 mx-auto bg-red-600 rounded-full flex items-center justify-center mb-6 group-hover:scale-110 transition-transform border-2 border-gold-400 group-hover:animate-bounce">
                        <i class="fas fa-fire text-gold-400 text-2xl"></i>
                    </div>
                    <h3 class="font-serif text-2xl text-gold-400 mb-2">Sumuhurtham</h3>
                    <p class="font-sans text-sm text-gray-300 mb-4">Thu, Mar 5, 2026 | 9:50 AM</p>
                    <p class="font-sans text-sm mb-4">The sacred knot (Mangalya Dharana) tied amidst Vedic chants in Hasta Nakshatram, Mesha Lagnam.</p>
                    <span class="text-xs uppercase tracking-widest text-gold-400/80 border-t border-gold-400/30 pt-4 block">Bride Groom's Residence, Kodandapuram</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Gallery Section (Home Page Preview) -->
    <section id="gallery" class="py-24 bg-cream">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <div class="reveal">
                <h2 class="font-script text-5xl text-maroon-800 mb-2">Our Memories</h2>
                <div class="h-1 w-24 bg-gold-400 mx-auto rounded mb-12"></div>
            </div>
            
            <!-- Single Featured Image of Bride and Groom -->
            <div class="max-w-4xl mx-auto mb-12 reveal-zoom">
                <div class="relative p-2 bg-white rounded-2xl shadow-2xl border border-gold-400/30 transform hover:scale-[1.02] transition-transform duration-500">
                    <img src="https://images.unsplash.com/photo-1544642878-a23a3a404988?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80" alt="Pellikuthuru and Pelli Koduku" class="w-full h-[500px] object-cover rounded-xl">
                    <div class="absolute inset-0 border-2 border-gold-400/50 rounded-xl m-4 pointer-events-none"></div>
                </div>
            </div>

            <!-- View Gallery Button -->
            <div class="reveal">
                <button onclick="openGalleryPage()" class="btn-gold px-10 py-4 rounded-full font-serif font-bold uppercase tracking-wider text-sm inline-flex items-center gap-3 cursor-pointer">
                    <i class="fas fa-images text-xl"></i> View Full Gallery
                </button>
            </div>
        </div>
    </section>

    <!-- Full Screen Gallery Page (Hidden by default) -->
    <div id="gallery-page" class="fixed inset-0 bg-cream z-50 hidden flex-col overflow-y-auto transition-opacity duration-500 opacity-0">
        <!-- Gallery Header -->
        <div class="p-6 md:px-12 md:py-8 flex justify-between items-center bg-maroon-900 text-gold-400 sticky top-0 z-20 shadow-xl border-b border-gold-400/30">
            <h2 class="font-script text-4xl md:text-5xl">Photo Gallery</h2>
            <div class="flex items-center gap-4 md:gap-6">
                <!-- Close Button -->
                <button onclick="closeGalleryPage()" class="text-4xl text-gold-400 hover:text-white transition-colors cursor-pointer" title="Close Gallery">
                    &times;
                </button>
            </div>
        </div>
        
        <!-- Gallery Grid Content -->
        <div class="p-6 md:p-12 max-w-7xl mx-auto w-full flex-grow">
            <div id="gallery-grid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
                <!-- Gallery items will be populated dynamically via JavaScript & Cloudinary -->
            </div>
        </div>
    </div>

    <!-- Lightbox Modal -->
    <div id="lightbox" class="fixed inset-0 bg-black/95 z-[60] hidden flex justify-center items-center opacity-0 transition-opacity duration-300">
        <span class="absolute top-6 right-8 text-white text-4xl cursor-pointer hover:text-gold-400" onclick="closeLightbox()">&times;</span>
        <img id="lightbox-img" src="" alt="Enlarged" class="max-w-[90%] max-h-[90vh] border-4 border-gold-400 rounded shadow-2xl transform scale-95 transition-transform duration-300">
    </div>

    <!-- Venue & Map -->
    <section id="venue" class="py-24 bg-white relative">
        <div class="max-w-6xl mx-auto px-4 flex flex-col lg:flex-row gap-12 items-center">
            <div class="lg:w-1/3 reveal-left">
                <h2 class="font-script text-5xl text-maroon-800 mb-6">The Venue</h2>
                <h3 id="venue-name-text" class="font-serif text-2xl font-bold mb-2 text-gray-800">Bride Groom's Residence</h3>
                <p id="venue-address-text" class="font-sans text-gray-600 mb-6 leading-relaxed">
                    Village: Kodandapuram,<br>
                    Mandal: Gudipalli,<br>
                    Dist: Nalgonda,<br>
                    Telangana
                </p>
                <div class="flex flex-col gap-4">
                    <a id="get-directions-link" href="#" target="_blank" class="flex items-center text-maroon-800 hover:text-gold-500 transition">
                        <i class="fas fa-directions text-2xl mr-3 w-8"></i>
                        <span class="font-semibold border-b border-transparent hover:border-gold-500">Get Directions</span>
                    </a>
                </div>
            </div>
            
            <div class="lg:w-2/3 w-full reveal-right">
                <div class="p-2 bg-gold-400/20 rounded-xl shadow-2xl border border-gold-400/30">
                    <iframe 
                        id="venue-map-iframe"
                        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d15264.444265814546!2d79.255!3d17.07!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3a3350eb93294ba7%3A0xc3f0b87532dfc9db!2sNalgonda%2C%20Telangana!5e0!3m2!1sen!2sin!4v1700000000000!5m2!1sen!2sin" 
                        width="100%" 
                        height="450" 
                        style="border:0; border-radius: 0.5rem;" 
                        allowfullscreen="" 
                        loading="lazy" 
                        referrerpolicy="no-referrer-when-downgrade">
                    </iframe>
                </div>
            </div>
        </div>
    </section>

    <!-- RSVP Section -->
    <section id="rsvp" class="py-24 bg-maroon-900 hero-bg relative">
        <div class="absolute inset-0 bg-maroon-900/80"></div>
        <div class="max-w-3xl mx-auto px-4 relative z-10 text-center">
            <h2 class="font-script text-5xl text-gold-400 mb-4 reveal">Be Our Guest</h2>
            <p class="font-serif text-cream mb-10 reveal">Kindly RSVP by February 28th, 2026</p>
            
            <div class="glass-card bg-white/5 p-8 md:p-12 rounded-2xl border border-gold-400/40 shadow-2xl reveal">
                <form id="rsvp-form" onsubmit="handleRSVP(event)">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                        <div>
                            <input type="text" id="rsvp-name" placeholder="Full Name" required class="w-full input-animated bg-cream/10 border border-gold-400/30 rounded-lg px-4 py-3 text-white placeholder-gray-300 backdrop-blur-sm">
                        </div>
                        <div>
                            <input type="email" id="rsvp-email" placeholder="Email Address" required class="w-full input-animated bg-cream/10 border border-gold-400/30 rounded-lg px-4 py-3 text-white placeholder-gray-300 backdrop-blur-sm">
                        </div>
                    </div>
                    
                    <div class="mb-6">
                        <select id="rsvp-attendance" required class="w-full input-animated bg-cream/10 border border-gold-400/30 rounded-lg px-4 py-3 text-gray-300 backdrop-blur-sm appearance-none">
                            <option value="" disabled selected>Will you be attending?</option>
                            <option value="yes" class="text-gray-800">Joyfully Accepts</option>
                            <option value="no" class="text-gray-800">Regretfully Declines</option>
                        </select>
                    </div>

                    <div class="mb-8">
                        <textarea id="rsvp-message" placeholder="Any dietary restrictions or special wishes for the couple?" rows="3" class="w-full input-animated bg-cream/10 border border-gold-400/30 rounded-lg px-4 py-3 text-white placeholder-gray-300 backdrop-blur-sm"></textarea>
                    </div>
                    
                    <button type="submit" class="w-full btn-gold py-4 rounded-lg font-serif font-bold text-lg uppercase tracking-widest relative overflow-hidden">
                        <span id="btn-text">Send RSVP</span>
                        <div id="btn-spinner" class="hidden absolute inset-0 flex items-center justify-center bg-[#d4af37]">
                            <i class="fas fa-circle-notch fa-spin text-maroon-900 text-2xl"></i>
                        </div>
                    </button>
                </form>
                
                <!-- Success Message -->
                <div id="rsvp-success" class="hidden mt-6 bg-green-500/20 border border-green-500/50 rounded-lg p-4 text-white">
                    <i class="fas fa-check-circle text-gold-400 mr-2"></i> Thank you! Your RSVP has been received.
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-maroon-900 text-center py-12 border-t border-gold-400/20 relative overflow-hidden">
        <div class="max-w-4xl mx-auto px-4 relative z-10">
            <h2 class="font-script text-6xl text-gold-400 mb-4">Thank You</h2>
            <p class="font-serif text-cream/70 mb-6">We look forward to celebrating with you.</p>
            
            <div class="text-cream/90 font-sans text-sm mb-8 space-y-2">
                <p><strong>Invited by:</strong> Chatla Anjamma, Sri Chatla Iddaiah & Smt. Jayamma</p>
                <p><i class="fas fa-phone-alt text-gold-400 mr-2"></i> 8106718860, 8106079690</p>
            </div>

            <div class="font-serif text-gold-400/50 text-sm tracking-widest">
                SRAVAN <span class="mx-2">&hearts;</span> NIHARIKA
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getFirestore, collection, onSnapshot, query, orderBy, doc, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBstwDEIau7YHLbgFhkLbod9OMkPw3Xgf4",
            authDomain: "iare-2204f.firebaseapp.com",
            projectId: "iare-2204f",
            storageBucket: "iare-2204f.firebasestorage.app",
            messagingSenderId: "962120096501",
            appId: "1:962120096501:web:2eec0d190a65ca499683bc"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // Map functions to window so HTML inline onclick handlers can access them
        window.toggleMusic = toggleMusic;
        window.openLightbox = openLightbox;
        window.closeLightbox = closeLightbox;
        window.openGalleryPage = openGalleryPage;
        window.closeGalleryPage = closeGalleryPage;
        window.handleRSVP = handleRSVP;

        // 1. Preloader
        window.addEventListener('load', () => {
            const loader = document.getElementById('loader');
            setTimeout(() => {
                loader.style.opacity = '0';
                setTimeout(() => {
                    loader.style.display = 'none';
                }, 1000);
            }, 500);
        });

        // 2. Navbar Scroll Effect
        window.addEventListener('scroll', () => {
            const nav = document.getElementById('navbar');
            if (window.scrollY > 50) {
                nav.classList.add('bg-maroon-900/95', 'backdrop-blur-md', 'shadow-lg');
                nav.classList.remove('py-4');
            } else {
                nav.classList.remove('bg-maroon-900/95', 'backdrop-blur-md', 'shadow-lg');
                nav.classList.add('py-4');
            }
        });

        // 3. Falling Petals Animation (Marigold & Rose mix)
        const petalsContainer = document.getElementById('petals-container');
        function createPetal() {
            if(window.innerWidth < 768 && document.querySelectorAll('.petal').length > 20) return; 
            if(document.querySelectorAll('.petal').length > 40) return; 
            
            const petal = document.createElement('div');
            
            const isMarigold = Math.random() > 0.4;
            petal.classList.add('petal');
            petal.classList.add(isMarigold ? 'marigold' : 'rose');
            
            petal.style.left = Math.random() * 100 + 'vw';
            petal.style.animationDuration = Math.random() * 3 + 4 + 's'; 
            petal.style.opacity = Math.random() * 0.5 + 0.5;
            
            const scale = Math.random() * 0.5 + 0.8;
            petal.style.transform = `scale(${scale})`;

            petalsContainer.appendChild(petal);

            setTimeout(() => {
                petal.remove();
            }, 7000);
        }
        setInterval(createPetal, 400);

        // 4. Scroll Reveal Intersection Observer
        const revealElements = document.querySelectorAll('.reveal, .reveal-left, .reveal-right, .reveal-zoom');
        
        const revealCallback = (entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('active');
                    observer.unobserve(entry.target); 
                }
            });
        };

        const revealOptions = {
            threshold: 0.15,
            rootMargin: "0px 0px -50px 0px"
        };

        const revealObserver = new IntersectionObserver(revealCallback, revealOptions);
        revealElements.forEach(el => revealObserver.observe(el));

        // 5. Countdown Timer - Target: March 5th, 2026 at 9:50 AM
        const targetDate = new Date("Mar 05, 2026 09:50:00").getTime();
        
        const countdownTimer = setInterval(() => {
            const now = new Date().getTime();
            const distance = targetDate - now;

            const days = Math.floor(distance / (1000 * 60 * 60 * 24));
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);

            const timerHTML = `
                <div class="flex flex-col items-center transform transition-transform hover:scale-110">
                    <div class="countdown-glow w-16 h-16 md:w-20 md:h-20 bg-maroon-800 rounded-full flex items-center justify-center text-gold-400 font-serif text-2xl md:text-3xl font-bold border-2 border-gold-400/50">${days}</div>
                    <span class="font-sans text-xs md:text-sm uppercase tracking-widest mt-3 font-semibold text-gray-700">Days</span>
                </div>
                <div class="flex flex-col items-center transform transition-transform hover:scale-110 delay-75">
                    <div class="countdown-glow w-16 h-16 md:w-20 md:h-20 bg-maroon-800 rounded-full flex items-center justify-center text-gold-400 font-serif text-2xl md:text-3xl font-bold border-2 border-gold-400/50">${hours}</div>
                    <span class="font-sans text-xs md:text-sm uppercase tracking-widest mt-3 font-semibold text-gray-700">Hrs</span>
                </div>
                <div class="flex flex-col items-center transform transition-transform hover:scale-110 delay-150">
                    <div class="countdown-glow w-16 h-16 md:w-20 md:h-20 bg-maroon-800 rounded-full flex items-center justify-center text-gold-400 font-serif text-2xl md:text-3xl font-bold border-2 border-gold-400/50">${minutes}</div>
                    <span class="font-sans text-xs md:text-sm uppercase tracking-widest mt-3 font-semibold text-gray-700">Min</span>
                </div>
                <div class="flex flex-col items-center transform transition-transform hover:scale-110 delay-200">
                    <div class="countdown-glow w-16 h-16 md:w-20 md:h-20 bg-maroon-800 rounded-full flex items-center justify-center text-gold-400 font-serif text-2xl md:text-3xl font-bold border-2 border-gold-400/50">${seconds}</div>
                    <span class="font-sans text-xs md:text-sm uppercase tracking-widest mt-3 font-semibold text-gray-700">Sec</span>
                </div>
            `;
            
            const countdownEl = document.getElementById("countdown");
            if(countdownEl) countdownEl.innerHTML = timerHTML;

            if (distance < 0) {
                clearInterval(countdownTimer);
                if(countdownEl) countdownEl.innerHTML = "<div class='text-2xl font-script text-maroon-800'>The Celebration Has Begun!</div>";
            }
        }, 1000);

        // 6. Lightbox Logic
        const lightbox = document.getElementById('lightbox');
        const lightboxImg = document.getElementById('lightbox-img');

        function openLightbox(src) {
            lightboxImg.src = src;
            lightbox.classList.remove('hidden');
            setTimeout(() => {
                lightbox.classList.remove('opacity-0');
                lightboxImg.classList.remove('scale-95');
                lightboxImg.classList.add('scale-100');
            }, 10);
        }

        function closeLightbox() {
            lightbox.classList.add('opacity-0');
            lightboxImg.classList.remove('scale-100');
            lightboxImg.classList.add('scale-95');
            setTimeout(() => {
                lightbox.classList.add('hidden');
            }, 300);
        }

        lightbox.addEventListener('click', (e) => {
            if(e.target === lightbox) closeLightbox();
        });

        // 6.1 Gallery Page Logic
        const galleryPage = document.getElementById('gallery-page');
        
        function openGalleryPage() {
            galleryPage.classList.remove('hidden');
            setTimeout(() => {
                galleryPage.classList.remove('opacity-0');
            }, 10);
            document.body.style.overflow = 'hidden'; 
        }

        function closeGalleryPage() {
            galleryPage.classList.add('opacity-0');
            setTimeout(() => {
                galleryPage.classList.add('hidden');
            }, 500); 
            document.body.style.overflow = 'auto'; 
        }

        // 6.2 LIVE Gallery Logic
        let galleryImages = []; 

        function renderGallery() {
            const grid = document.getElementById('gallery-grid');
            if(!grid) return;
            
            if(galleryImages.length === 0) {
                grid.innerHTML = '<div class="col-span-full text-center py-12"><i class="fas fa-camera text-4xl text-gold-400 mb-4 block"></i><p class="text-maroon-800 font-serif text-xl">Waiting for beautiful memories to be captured...</p></div>';
                return;
            }

            grid.innerHTML = '';
            galleryImages.forEach((imgObj, index) => {
                const delay = (index % 3) * 100;
                // Auto-optimize images on the fly via Cloudinary fetch URL
                const optimizedUrl = imgObj.url.includes('/upload/') ? imgObj.url.replace('/upload/', '/upload/w_600,h_800,c_fill,q_auto,f_auto/') : imgObj.url;
                
                // Create force-download URL for the original high-res image
                const downloadUrl = imgObj.url.includes('/upload/') ? imgObj.url.replace('/upload/', '/upload/fl_attachment/') : imgObj.url;
                
                const html = `
                    <div class="img-zoom-container rounded-lg shadow-md reveal-zoom active relative group" style="transition-delay: ${delay}ms;">
                        <img src="${optimizedUrl}" alt="Wedding Memory ${index + 1}" class="w-full h-80 object-cover img-zoom cursor-pointer" onclick="openLightbox('${imgObj.url}')">
                        
                        <!-- Download Button (Top Right) -->
                        <a href="${downloadUrl}" download="Sravan_Niharika_Wedding_${index + 1}.jpg" target="_blank" class="absolute top-3 right-3 bg-maroon-900/90 text-gold-400 hover:text-white hover:bg-maroon-800 w-10 h-10 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-300 shadow-xl z-10 border border-gold-400/50 transform hover:scale-110" title="Download High-Res Image">
                            <i class="fas fa-download"></i>
                        </a>

                        <div class="absolute bottom-0 left-0 bg-maroon-900/90 text-gold-400 text-xs px-3 py-1.5 m-2 rounded opacity-0 group-hover:opacity-100 transition-opacity capitalize shadow-lg">
                            <i class="fas fa-tag mr-1"></i> ${imgObj.category.replace('-', ' ')}
                        </div>
                    </div>
                `;
                grid.innerHTML += html;
            });
        }

        // 6.3 Firebase Real-time Listener
        const photosRef = collection(db, "wedding_photos");
        const q = query(photosRef, orderBy("uploadedAt", "desc"));
        
        onSnapshot(q, (snapshot) => {
            galleryImages = [];
            snapshot.forEach((doc) => {
                galleryImages.push({ id: doc.id, ...doc.data() });
            });
            renderGallery();
        }, (error) => {
            console.error("Error fetching images: ", error);
        });

        // 6.4 Firebase Real-time Venue Location Listener
        const venueDocRef = doc(db, "wedding_info", "venue");
        onSnapshot(venueDocRef, (docSnap) => {
            if (docSnap.exists()) {
                const data = docSnap.data();
                if(data.heroLocation) document.getElementById('hero-location-text').innerText = data.heroLocation;
                if(data.venueName) document.getElementById('venue-name-text').innerText = data.venueName;
                if(data.venueAddress) document.getElementById('venue-address-text').innerHTML = data.venueAddress.replace(/\n/g, '<br>');
                
                if(data.latitude && data.longitude) {
                    // Update Map Iframe dynamically
                    const mapUrl = `https://maps.google.com/maps?q=${data.latitude},${data.longitude}&hl=en&z=15&output=embed`;
                    document.getElementById('venue-map-iframe').src = mapUrl;
                    
                    // Update the "Get Directions" link to route directly to coordinates
                    const dirLink = document.getElementById('get-directions-link');
                    if(dirLink) {
                        dirLink.href = `https://www.google.com/maps/dir/?api=1&destination=${data.latitude},${data.longitude}`;
                    }
                }
            }
        });

        // 6.5 Twinkling Sparkles Generator for Hero
        const sparklesContainer = document.getElementById('sparkles-container');
        if(sparklesContainer) {
            for(let i = 0; i < 30; i++) {
                let sparkle = document.createElement('div');
                sparkle.classList.add('sparkle');
                
                sparkle.style.left = Math.random() * 100 + '%';
                sparkle.style.top = Math.random() * 100 + '%';
                let size = Math.random() * 3 + 1; 
                sparkle.style.width = size + 'px';
                sparkle.style.height = size + 'px';
                sparkle.style.animationDuration = (Math.random() * 3 + 2) + 's'; 
                sparkle.style.animationDelay = (Math.random() * 5) + 's';
                
                sparklesContainer.appendChild(sparkle);
            }
        }

        // 7. RSVP Form Handler
        async function handleRSVP(e) {
            e.preventDefault();
            const btnText = document.getElementById('btn-text');
            const btnSpinner = document.getElementById('btn-spinner');
            const successMsg = document.getElementById('rsvp-success');
            
            // Show loading spinner
            btnText.style.opacity = '0';
            btnSpinner.classList.remove('hidden');
            
            // Collect form data
            const rsvpData = {
                name: document.getElementById('rsvp-name').value,
                email: document.getElementById('rsvp-email').value,
                attendance: document.getElementById('rsvp-attendance').value,
                message: document.getElementById('rsvp-message').value,
                timestamp: serverTimestamp()
            };

            try {
                // Save to Firebase Firestore collection "rsvps"
                await addDoc(collection(db, "rsvps"), rsvpData);

                // Stop spinner
                btnSpinner.classList.add('hidden');
                btnText.style.opacity = '1';
                e.target.reset(); 
                
                // Show success message
                successMsg.classList.remove('hidden');
                successMsg.style.animation = "pulse 2s infinite";
                
                // Hide success message after 5 seconds
                setTimeout(() => {
                    successMsg.classList.add('hidden');
                }, 5000);

            } catch (error) {
                console.error("Error saving RSVP: ", error);
                alert("Sorry, there was an error submitting your RSVP. Please try again.");
                btnSpinner.classList.add('hidden');
                btnText.style.opacity = '1';
            }
        }

        // 8. Music Toggle & LIVE Playlist from Firebase
        let playlist = [];
        let currentSongIndex = 0;
        const bgAudio = new Audio();
        bgAudio.autoplay = true; // Attempt native autoplay aggressive
        let isMusicPlaying = false;

        // Auto-play the next song when the current one ends
        bgAudio.addEventListener('ended', () => {
            if (playlist.length > 1) {
                currentSongIndex = (currentSongIndex + 1) % playlist.length;
                bgAudio.src = playlist[currentSongIndex];
                bgAudio.play().catch(e => console.log("Playback interrupted"));
            }
        });

        // Fetch Songs from Firebase
        const songsRef = collection(db, "wedding_songs");
        const qSongs = query(songsRef, orderBy("uploadedAt", "asc"));
        
        onSnapshot(qSongs, (snapshot) => {
            const newPlaylist = [];
            snapshot.forEach((doc) => {
                newPlaylist.push(doc.data().url);
            });
            
            playlist = newPlaylist;

            if (playlist.length > 0) {
                // Set the loop property dynamically based on playlist size
                bgAudio.loop = (playlist.length === 1);

                // If the player doesn't have a source yet, set the first song and aggressively play
                if (!bgAudio.src || bgAudio.src === window.location.href) {
                    bgAudio.src = playlist[0];
                    bgAudio.play().then(() => {
                        isMusicPlaying = true;
                        const icon = document.getElementById('music-icon');
                        icon.classList.remove('fa-volume-mute', 'fa-music');
                        icon.classList.add('fa-volume-up');
                        icon.style.animation = "pulse 1s infinite";
                    }).catch(err => {
                        console.log("Autoplay was blocked by browser. Awaiting user interaction...");
                    });
                }
            }
        });

        function toggleMusic() {
            if (playlist.length === 0) return; // Do nothing if no songs

            const icon = document.getElementById('music-icon');
            
            if (bgAudio.paused) {
                bgAudio.play().then(() => {
                    isMusicPlaying = true;
                    icon.classList.remove('fa-music', 'fa-volume-mute');
                    icon.classList.add('fa-volume-up');
                    icon.style.animation = "pulse 1s infinite";
                }).catch(err => {
                    console.log("Audio playback was prevented by browser:", err);
                });
            } else {
                bgAudio.pause();
                isMusicPlaying = false;
                icon.classList.remove('fa-volume-up');
                icon.classList.add('fa-volume-mute');
                icon.style.animation = "none";
            }
        }

        // Fallback: Start the music the very first time they click anywhere IF it was blocked on load
        document.body.addEventListener('click', function startMusicOnInteraction() {
            if (!isMusicPlaying && playlist.length > 0) {
                toggleMusic();
            }
            // Remove the listener so it only triggers on the first click
            document.body.removeEventListener('click', startMusicOnInteraction);
        }, { once: true });
        
    </script>
</body>
</html>